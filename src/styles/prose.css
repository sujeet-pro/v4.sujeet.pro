/* ==========================================================================
   PROSE CUSTOMIZATION
   ========================================================================== */

.prose {
  --tw-prose-body: var(--color-text-secondary);
  --tw-prose-headings: var(--color-text);
  --tw-prose-lead: var(--color-text);
  --tw-prose-links: var(--color-text);
  --tw-prose-bold: var(--color-text);
  --tw-prose-counters: var(--color-text-muted);
  --tw-prose-bullets: var(--color-text-muted);
  --tw-prose-hr: var(--color-border);
  --tw-prose-quotes: var(--color-text);
  --tw-prose-quote-borders: var(--color-border-hover);
  --tw-prose-captions: var(--color-text-muted);
  --tw-prose-code: var(--color-code-text);
  --tw-prose-pre-code: var(--color-text-secondary);
  --tw-prose-pre-bg: var(--color-bg-alt);
  --tw-prose-th-borders: var(--color-border);
  --tw-prose-td-borders: var(--color-border);
}

.prose {
  font-size: 17px;
  line-height: 2;
}

.prose p {
  @apply mb-7;
}

.prose h1 {
  @apply mt-0 mb-3 font-sans font-normal;
  font-size: clamp(32px, 5vw, 48px);
  line-height: 1.15;
  letter-spacing: -0.03em;
}

.prose h2 {
  @apply mt-16 mb-6 font-sans font-semibold;
  font-size: clamp(24px, 3vw, 32px);
  line-height: 1.3;
  letter-spacing: -0.02em;
}

.prose h3 {
  @apply mt-12 mb-4 font-sans font-medium;
  font-size: clamp(18px, 2vw, 24px);
  line-height: 1.4;
}

.prose h4 {
  @apply mt-10 mb-3 font-sans font-medium;
  font-size: 18px;
  line-height: 1.4;
}

.prose a {
  @apply relative no-underline;
  background-image: linear-gradient(var(--color-text), var(--color-text));
  background-size: 100% 1px;
  background-position: 0 100%;
  background-repeat: no-repeat;
  transition: background-size var(--transition-normal);
}

.prose a:hover {
  background-size: 100% 2px;
}

.prose blockquote {
  @apply my-10 px-8 py-6 not-italic;
  background: var(--color-blockquote-bg);
  border-left-width: 2px;
  font-size: 17px;
  line-height: 1.8;
  font-style: italic;
}

.prose blockquote p {
  @apply mb-0;
}

.prose code {
  @apply rounded font-mono;
  font-size: 14px;
  background: var(--color-code-bg);
  padding: 3px 7px;
}

.prose code::before,
.prose code::after {
  content: none;
}

.prose pre {
  @apply my-8 rounded-lg font-mono;
  font-size: 14px;
  line-height: 1.75;
  border: 1px solid var(--color-border);
}

.prose pre code {
  background: transparent;
  padding: 0;
  font-size: inherit;
}

.prose ul,
.prose ol {
  @apply my-6 space-y-3;
}

.prose li {
  font-size: 17px;
  line-height: 1.8;
}

.prose figcaption {
  @apply text-center italic;
  font-size: 14px;
  color: var(--color-text-muted);
}

.prose > p:first-of-type {
  font-size: 19px;
  line-height: 1.8;
  color: var(--color-text);
}

/* ==========================================================================
   HEADING DEEP LINKS
   ========================================================================== */

.heading-with-deep-link {
  @apply relative;

  .deep-link {
    @apply no-underline;

    &::before {
      content: "#";
      @apply absolute left-0 hidden -translate-x-full pr-2;
      color: var(--color-text-muted);
    }
  }

  &:hover {
    .deep-link {
      &::before {
        @apply block;
      }
    }
  }
}
