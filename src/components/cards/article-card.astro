---
import type { ArticleCardInfo, ContentItemWithoutContent } from "@/utils/content"
import Link from "../ui/link.astro"
import Frontmatter from "../ui/frontmatter.astro"

type HeadingLevel = "h2" | "h3" | "h4" | "h5" | "h6"

type Props = {
  article: ContentItemWithoutContent | ArticleCardInfo
  textHeading?: string
  /** Heading level for the article title. Defaults to h3 for proper semantic hierarchy. */
  headingLevel?: HeadingLevel
}

const { article, textHeading, headingLevel = "h3" } = Astro.props as Props
const { minutesRead, isDraft, category, topic } = article

const HeadingTag = headingLevel
const frontmatterProps = {
  ...(minutesRead !== undefined ? { minutesRead } : {}),
  ...(typeof isDraft === "boolean" ? { isDraft } : {}),
  category,
  topic,
}
---

<li class="article-card">
  {textHeading && <p class="article-card-label">{textHeading}</p>}

  <HeadingTag class="article-card-title">
    <Link href={article.href} class="article-card-link">
      {article.title}
    </Link>
  </HeadingTag>

  <Frontmatter {...frontmatterProps} class="article-card-frontmatter" />

  <p class="article-card-excerpt">
    {article.description}
  </p>
</li>
