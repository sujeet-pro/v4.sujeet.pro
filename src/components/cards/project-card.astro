---
import type { ProjectCardInfo } from "@/utils/content"
import Link from "@/components/ui/link.astro"
import { Icon } from "astro-icon/components"

interface Props {
  project: ProjectCardInfo
}

const { project } = Astro.props
---

<li class="project-card">
  <h3 class="project-card-title">
    <Link href={project.href}>{project.title}</Link>
  </h3>
  <div class="project-card-meta">
    <span class="project-card-meta-item">
      <Icon name="carbon:time" class="icon-sm" />
      {project.minutesRead}
    </span>
    {project.isDraft && <span class="badge-accent">Draft</span>}
    {
      project.gitRepo && (
        <Link href={project.gitRepo} class="project-card-link-item" target="_blank" rel="noopener noreferrer">
          <Icon name="carbon:logo-github" class="icon-sm" />
          <span>Source</span>
        </Link>
      )
    }
    {
      project.links.map((link) => (
        <Link href={link.url} class="project-card-link-item" target="_blank" rel="noopener noreferrer">
          <Icon name="carbon:launch" class="icon-sm" />
          <span>{link.text}</span>
        </Link>
      ))
    }
  </div>
  {project.description && <p class="project-card-excerpt">{project.description}</p>}
  {
    project.tags.length > 0 && (
      <div class="project-card-tags">
        {project.tags.map((tag) => (
          <Link href={`/tags/${tag.toLowerCase().replace(/\s+/g, "-")}`} class="tag">
            {tag}
          </Link>
        ))}
      </div>
    )
  }
</li>
