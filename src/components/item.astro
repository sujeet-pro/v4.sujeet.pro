---
import type { ContentItemWithoutContent } from "@/utils/content.type"
import Link from "./link.astro"
import Frontmatter from "./frontmatter.astro"

type Props = {
  item: ContentItemWithoutContent
  textHeading?: string
  showType?: boolean
}

const { item, textHeading, showType = false } = Astro.props as Props
const { minutesRead, publishedOn, lastUpdatedOn, isDraft, type } = item

// Get subcategory for deep-dives
const subcategory = type === "deep-dive" && "subcategory" in item ? item.subcategory : null
---

<li class="content-item cursor-pointer">
  {textHeading && <p class="text-muted mb-1 text-sm">{textHeading}</p>}

  <h2 class="content-item-title">
    <Link href={item.href} class="content-item-link">
      {item.title}
    </Link>
  </h2>

  <Frontmatter {minutesRead} {publishedOn} {lastUpdatedOn} {isDraft} {showType} {type} {subcategory} />

  <p class="content-item-excerpt">
    {item.description}
  </p>
</li>
