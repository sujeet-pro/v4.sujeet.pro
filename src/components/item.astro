---
import type { ContentItemWithoutContent } from "@/utils/content.type"
import Link from "./link.astro"
import Frontmatter from "./frontmatter.astro"

type HeadingLevel = "h2" | "h3" | "h4" | "h5" | "h6"

type Props = {
  item: ContentItemWithoutContent
  textHeading?: string
  showType?: boolean
  showCategory?: boolean
  showTags?: boolean
  /** Heading level for the item title. Defaults to h3 for proper semantic hierarchy. */
  headingLevel?: HeadingLevel
}

const { item, textHeading, showType = false, showCategory = true, showTags = true, headingLevel = "h3" } = Astro.props as Props
const { minutesRead, publishedOn, isDraft, type, tags, category } = item

const HeadingTag = headingLevel
---

<li class="content-item">
  {textHeading && <p class="content-item-label">{textHeading}</p>}

  <HeadingTag class="content-item-title">
    <Link href={item.href} class="content-item-link">
      {item.title}
    </Link>
  </HeadingTag>

  <Frontmatter {minutesRead} {publishedOn} {isDraft} {showType} {type} {showCategory} {category} class="content-item-frontmatter" />

  <p class="content-item-excerpt">
    {item.description}
  </p>

  {showTags && tags && tags.length > 0 && (
    <div class="content-item-tags">
      {tags.slice(0, 5).map((tag) => (
        <Link href={tag.href} class="tag">{tag.name}</Link>
      ))}
      {tags.length > 5 && <span class="tag">+{tags.length - 5}</span>}
    </div>
  )}
</li>
