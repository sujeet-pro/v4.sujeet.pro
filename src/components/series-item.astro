---
import type { Series } from "@/utils/content.type"
import Link from "./link.astro"

type Props = {
  series: Series
  textHeading?: string
}
const { series, textHeading } = Astro.props as Props
---

<li class="sp-border-muted relative z-10 flex cursor-pointer flex-col gap-2 border-b py-6 last:border-b-0">
  <!-- Text heading (if provided) -->
  {textHeading && <p class="text-muted-foreground mb-1 text-sm font-light">{textHeading}</p>}

  <!-- Title with link -->
  <h2 class="text-xl font-light">
    <Link href={series.href} class="series-link no-underline hover:underline">
      {series.name}
    </Link>
  </h2>

  <!-- Series meta information -->
  <div class="text-muted-foreground text-sm">
    <span>{series.blogs.length} {series.blogs.length === 1 ? "post" : "posts"}</span>
    {series.featured && <span class="ml-2 rounded-full bg-blue-100 px-2 py-1 text-xs text-blue-800">Featured</span>}
  </div>

  <!-- Blog list -->
  {
    series.blogs.length > 0 && (
      <ul class="mt-2 flex flex-col gap-2 pl-4">
        {series.blogs.map((blog) => (
          <li class="list-disc">
            <Link href={blog.href}>{blog.title}</Link>
          </li>
        ))}
      </ul>
    )
  }
</li>
