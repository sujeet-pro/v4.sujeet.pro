---
import ArticleCard from "@/components/article-card.astro"
import Layout from "@/layout/layout.astro"
import { getAllArticleCards } from "@/utils/content"
import { formatCount } from "@/utils/format.utils"

const allArticles = await getAllArticleCards()
---

<Layout title="All Articles" description="Browse all articles" crumbs={null} pageType="default">
  <h1 class="page-title" transition:animate="fade">All Articles</h1>
  <p class="page-description">
    {formatCount(allArticles.length, "article")} on programming, system design, web platform, and more.
  </p>

  <section>
    {
      allArticles.length > 0 ? (
        <ul class="article-list articles-animated">
          {allArticles.map((article, index) => (
            <div class="article-item-animated" style={`animation-delay: ${Math.min(index * 50, 400)}ms`}>
              <ArticleCard article={article} />
            </div>
          ))}
        </ul>
      ) : (
        <p class="text-muted empty-state">No articles yet. Check back soon!</p>
      )
    }
  </section>
</Layout>

<style is:global>
  @reference "tailwindcss";

  .articles-animated {
    /* Container for animated items */
  }

  .article-item-animated {
    animation: fadeInUp var(--transition-slow) forwards;
    opacity: 0;
  }

  .empty-state {
    @apply py-12 text-center;
  }
</style>
