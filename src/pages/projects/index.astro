---
import Layout from "@/layout/layout.astro"
import ProjectCard from "@/components/project-card.astro"
import SidebarNavProjects from "@/components/sidebar-nav-projects.astro"
import { getAllProjectCards } from "@/utils/content"

const projects = await getAllProjectCards()
const count = projects.length
const countText = count === 1 ? "1 project" : `${count} projects`
---

<Layout title="Projects" description="Open source projects and tools" crumbs={null} hasLeftSidebar={true}>
  <SidebarNavProjects slot="sidebar-left" />

  <h1 class="page-title">Projects</h1>
  <p class="page-description">Open source projects, tools, and experiments.</p>

  {
    projects.length > 0 ? (
      <>
        <p class="meta-text mb-8">{countText}</p>
        <ul class="article-list">
          {projects.map((project) => (
            <ProjectCard project={project} />
          ))}
        </ul>
      </>
    ) : (
      <div class="search-placeholder">
        <p class="text-muted">No projects yet. Check back soon.</p>
      </div>
    )
  }
</Layout>
