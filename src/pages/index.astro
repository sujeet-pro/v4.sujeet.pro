---
import Layout from "@/layout/layout.astro"
import Profile from "@/components/profile.astro"
import Item from "@/components/item.astro"
import Link from "@/components/link.astro"
import { getDeepDives, getNotes } from "@/utils/content-collection.utils"

// Get recent items from each section (limit to 5 each)
const [deepDives, notes] = await Promise.all([getDeepDives(), getNotes()])

const recentDeepDives = deepDives.slice(0, 5)
const recentNotes = notes.slice(0, 5)

// Define sections with their data
const sections = [
  {
    title: "Deep Dives",
    description: "In-depth technical content and comprehensive guides",
    href: "/deep-dives",
    items: recentDeepDives,
  },
  {
    title: "Notes",
    description: "Casual technical content - design docs, programming, tools, and productivity",
    href: "/notes",
    items: recentNotes,
  },
].filter((section) => section.items.length > 0)
---

<Layout
  title="Sujeet Jaiswal - Frontend Principal Engineer"
  description="Sujeet Jaiswal is a Frontend Principal Engineer crafting exceptional user experiences through innovative frontend architecture and scalable design systems."
  crumbs={null}
  pageType="default"
>
  <Profile />

  {
    sections.map((section) => (
      <section class="my-12 md:my-16">
        <div class="mb-6 flex items-baseline justify-between gap-4">
          <div>
            <h2 class="text-2xl font-semibold">{section.title}</h2>
            <p class="text-muted text-sm">{section.description}</p>
          </div>
          <Link href={section.href} class="nav-link shrink-0 text-sm">
            View all &rarr;
          </Link>
        </div>
        <ul class="content-list">
          {section.items.map((item) => (
            <Item item={item} />
          ))}
        </ul>
      </section>
    ))
  }
</Layout>
