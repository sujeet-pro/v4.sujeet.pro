---
import { getCollection } from "astro:content"
import Link from "@/components/link.astro"

// Get all categories for each content type (only categories with articles are defined)
const deepDivesCategories = (await getCollection("categories-deep-dives"))
  .map((c) => ({ id: c.id, title: c.data.title, name: c.data.name, href: `/deep-dives/${c.id}` }))

const notesCategories = (await getCollection("categories-notes"))
  .map((c) => ({ id: c.id, title: c.data.title, name: c.data.name, href: `/notes/${c.id}` }))
---

<footer class="site-footer">
  <div class="content-container site-footer-inner">
    {/* Category Links Grid */}
    <div class="site-footer-categories">
      <div class="site-footer-category-section">
        <h4 class="site-footer-category-title">
          <Link href="/deep-dives" class="nav-link">Deep Dives</Link>
        </h4>
        <nav class="site-footer-category-links">
          {deepDivesCategories.map((cat) => (
            <Link href={cat.href} class="nav-link" title={cat.title}>{cat.name}</Link>
          ))}
        </nav>
      </div>
      <div class="site-footer-category-section">
        <h4 class="site-footer-category-title">
          <Link href="/notes" class="nav-link">Notes</Link>
        </h4>
        <nav class="site-footer-category-links">
          {notesCategories.map((cat) => (
            <Link href={cat.href} class="nav-link" title={cat.title}>{cat.name}</Link>
          ))}
        </nav>
      </div>
    </div>

    <div class="site-footer-links">
      <nav class="site-footer-nav">
        <Link href="/articles" class="nav-link">All Articles</Link>
        <Link href="/tag" class="nav-link">Tags</Link>
        <Link href="/search" class="nav-link">Search</Link>
        <Link href="/cv" class="nav-link">Resume</Link>
        <Link href="/drafts" class="nav-link">Drafts</Link>
      </nav>

      <div class="site-footer-social">
        <Link
          href="https://github.com/sujeet-pro"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="GitHub"
          title="GitHub"
          icon="devicon:github"
          class="nav-link"
        />
        <Link
          href="https://www.linkedin.com/in/sujeetkrjaiswal/"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="LinkedIn"
          title="LinkedIn"
          icon="devicon-plain:linkedin"
          class="nav-link"
        />
        <Link
          href="https://twitter.com/sujeetpro"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Twitter"
          title="Twitter"
          icon="devicon:twitter"
          class="nav-link"
        />
      </div>
    </div>

    <p class="site-footer-copyright">
      &copy; {new Date().getFullYear()} Sujeet Jaiswal. All rights reserved.
    </p>
  </div>
</footer>
