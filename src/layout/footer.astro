---
import { getCollection } from "astro:content"
import Link from "@/components/link.astro"

// Get featured categories for each content type
const writingCategories = (await getCollection("categories-writing"))
  .filter((c) => c.data.featured)
  .map((c) => ({ id: c.id, name: c.data.name, href: `/writing/${c.id}` }))

const deepDivesCategories = (await getCollection("categories-deep-dives"))
  .filter((c) => c.data.featured)
  .map((c) => ({ id: c.id, name: c.data.name, href: `/deep-dives/${c.id}` }))

const workCategories = (await getCollection("categories-work"))
  .filter((c) => c.data.featured)
  .map((c) => ({ id: c.id, name: c.data.name, href: `/work/${c.id}` }))

const usesCategories = (await getCollection("categories-uses"))
  .filter((c) => c.data.featured)
  .map((c) => ({ id: c.id, name: c.data.name, href: `/uses/${c.id}` }))
---

<footer class="site-footer">
  <div class="content-container site-footer-inner">
    {/* Category Links Grid */}
    <div class="site-footer-categories">
      <div class="site-footer-category-section">
        <h4 class="site-footer-category-title">
          <Link href="/deep-dives" class="nav-link">Deep Dives</Link>
        </h4>
        <nav class="site-footer-category-links">
          {deepDivesCategories.map((cat) => (
            <Link href={cat.href} class="nav-link">{cat.name}</Link>
          ))}
        </nav>
      </div>
      <div class="site-footer-category-section">
        <h4 class="site-footer-category-title">
          <Link href="/writing" class="nav-link">Writing</Link>
        </h4>
        <nav class="site-footer-category-links">
          {writingCategories.map((cat) => (
            <Link href={cat.href} class="nav-link">{cat.name}</Link>
          ))}
        </nav>
      </div>
      <div class="site-footer-category-section">
        <h4 class="site-footer-category-title">
          <Link href="/work" class="nav-link">Work</Link>
        </h4>
        <nav class="site-footer-category-links">
          {workCategories.map((cat) => (
            <Link href={cat.href} class="nav-link">{cat.name}</Link>
          ))}
        </nav>
      </div>
      <div class="site-footer-category-section">
        <h4 class="site-footer-category-title">
          <Link href="/uses" class="nav-link">Uses</Link>
        </h4>
        <nav class="site-footer-category-links">
          {usesCategories.map((cat) => (
            <Link href={cat.href} class="nav-link">{cat.name}</Link>
          ))}
        </nav>
      </div>
    </div>

    <div class="site-footer-links">
      <nav class="site-footer-nav">
        <Link href="/articles" class="nav-link">All Articles</Link>
        <Link href="/tag" class="nav-link">Tags</Link>
        <Link href="/search" class="nav-link">Search</Link>
        <Link href="/cv" class="nav-link">Resume</Link>
        <Link href="/drafts" class="nav-link">Drafts</Link>
      </nav>

      <div class="site-footer-social">
        <Link
          href="https://github.com/sujeet-pro"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="GitHub"
          title="GitHub"
          icon="devicon:github"
          class="nav-link"
        />
        <Link
          href="https://www.linkedin.com/in/sujeetkrjaiswal/"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="LinkedIn"
          title="LinkedIn"
          icon="devicon-plain:linkedin"
          class="nav-link"
        />
        <Link
          href="https://twitter.com/sujeetpro"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Twitter"
          title="Twitter"
          icon="devicon:twitter"
          class="nav-link"
        />
      </div>
    </div>

    <p class="site-footer-copyright">
      &copy; {new Date().getFullYear()} Sujeet Jaiswal. All rights reserved.
    </p>
  </div>
</footer>
